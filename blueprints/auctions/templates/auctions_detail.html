<!-- Auction Detail Template -->
{% extends "base.html" %}
{% block title %}{{ auction.title }}{% endblock %}
{% block content %}

  <!-- gÃ¥ tillbaka lÃ¤nk -->
    <p><a class="non-decoration" href="{{ url_for('auctions_bp.auctions_list') }}">â† Go back</a></p>
  <!-- information om auktionen -->
    <h1>{{ auction.title }}</h1>
    <p>{{ auction.description }}</p>
    <p><b>Category:</b> {{ auction.category }}</p>
    <p><b>Starting bid:</b> ${{ auction.starting_bid }}</p>
    <p><b>Current max bid:</b> ${{ current_max }}</p>
    <p><b>Ends at:</b> {{ auction.end_at.strftime("%d %b %Y kl %H:%M") }}</p>
  <!-- Reactions sektion -->
    <h2>Reactions</h2>
  <p>ğŸ‘ {{ likes }} | ğŸ‘ {{ dislikes }}</p>
  <form method="post" action="{{ url_for('auctions_bp.react', auction_id=auction.id) }}">
    <!-- Like/Dislike knappar -->
    <button class="button" name="kind" value="like">Like</button>
    <button class="button" name="kind" value="dislike">Dislike</button>
  </form>
  <!-- Bud sektion -->
  <h2>Top 2 bids</h2>
  <ol>
    {% for bid in top2 %}
      <li>{{ bid.bidder_email }} â€” ${{ bid.amount }} â€” {{ bid.created_at.strftime("%d %b %Y kl %H:%M") }}</li>
    {% else %}
      <li>No bids yet.</li>
    {% endfor %}
  </ol>
  <!-- Bud historik -->
  <h2>Bidding history</h2>
  <ol>
    {% for b in history %}
      <li>${{ b.amount }} â€” {{ b.created_at.strftime("%d %b %Y kl %H:%M") }}</li>
    {% else %}
      <li>No bids yet.</li>
    {% endfor %}
  </ol>

  <!-- Form fÃ¶r att lÃ¤gga ett bud -->
  <h2>Place a Bid</h2>
  {% if current_user.is_authenticated %}
    <form method="post" action="{{ url_for('auctions_bp.place_bid', auction_id=auction.id) }}">
        <div class="bid-email">
        <input type="radio" name="email_radio_option" value="true" checked> Use my registered email ({{ current_user.email }})
        <input type="radio" name="email_radio_option" value="false"> Use a different email
        </div>
        <br>
        <label for="bidder_email">Your Email:</label>
        <input type="email" id="bidder_email" name="bidder_email">
        <br>
        <label for="amount">Bid Amount:</label>
        <input type="number" id="amount" name="amount" step="0.01" required>
        <br>
        <button class="button" type="submit">Place Bid</button>
    </form>
  {% else %}
    <p><a class="non-decoration button-secondary" href="{{ url_for('auth_bp.login') }}">Logga in</a> fÃ¶r att lÃ¤gga ett bud.</p>
  {% endif %}

{% endblock %}